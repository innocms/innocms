var Editor=function(){"use strict";function d(n){return-1!==e.map(function(n){return n.toLowerCase()}).indexOf(n.toLowerCase())}function r(n,e,o){var t,i,r,s,a,l,p,u=e.$props.value?e.$props.value:"",c=e.$props.initialValue?e.$props.initialValue:"";o.setContent(u||(e.initialized?e.cache:c)),e.$watch("value",function(n,t){o&&"string"==typeof n&&n!==t&&n!==o.getContent({format:e.$props.outputFormat})&&o.setContent(n)}),e.$listeners.input&&(i=o,r=(t=e).$props.modelEvents?t.$props.modelEvents:null,s=Array.isArray(r)?r.join(" "):r,i.on(s||"change input undo redo",function(){t.$emit("input",i.getContent({format:t.$props.outputFormat}))})),a=n,l=e.$listeners,p=o,Object.keys(l).filter(d).forEach(function(n){var t=l[n];"function"==typeof t&&("onInit"===n?t(a,p):p.on(n.substring(2),function(n){return t(n,p)}))}),e.initialized=!0}function n(n){var t=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++p+String(t)}function s(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")}function t(){return{listeners:[],scriptId:n("tiny-script"),scriptLoaded:!1}}function a(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null}function o(i){return function(){var n,t,e,o=l(l({},i.$props.init),{readonly:i.$props.disabled,selector:"#"+i.elementId,plugins:(n=i.$props.init&&i.$props.init.plugins,t=i.$props.plugins,s(n).concat(s(t))),toolbar:i.$props.toolbar||i.$props.init&&i.$props.init.toolbar,inline:i.inlineEditor,setup:function(t){(i.editor=t).on("init",function(n){return r(n,i,t)}),i.$props.init&&"function"==typeof i.$props.init.setup&&i.$props.init.setup(t)}});null!==(e=i.element)&&"textarea"===e.tagName.toLowerCase()&&(i.element.style.visibility="",i.element.style.display=""),a().init(o)}}var i,l=function(){return(l=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++)for(var i in t=arguments[e])Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n}).apply(this,arguments)},e=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],p=0,u=(i=t(),{load:function(n,t,e){i.scriptLoaded?e():(i.listeners.push(e),n.getElementById(i.scriptId)||function(n,t,e,o){var i=t.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=e;var r=function(){i.removeEventListener("load",r),o()};i.addEventListener("load",r),t.head&&t.head.appendChild(i)}(i.scriptId,n,t,function(){i.listeners.forEach(function(n){return n()}),i.scriptLoaded=!0}))},reinitialize:function(){i=t()}}),c={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],value:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}};return{props:c,created:function(){this.elementId=this.$props.id||n("tiny-vue"),this.inlineEditor=this.$props.init&&this.$props.init.inline||this.$props.inline,this.initialized=!1},watch:{disabled:function(){this.editor.setMode(this.disabled?"readonly":"design")}},mounted:function(){if(this.element=this.$el,null!==a())o(this)();else if(this.element&&this.element.ownerDocument){var n=this.$props.cloudChannel?this.$props.cloudChannel:"5",t=this.$props.apiKey?this.$props.apiKey:"no-api-key",e=null==this.$props.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+t+"/tinymce/"+n+"/tinymce.min.js":this.$props.tinymceScriptSrc;u.load(this.element.ownerDocument,e,o(this))}},beforeDestroy:function(){null!==a()&&a().remove(this.editor)},deactivated:function(){var n;this.inlineEditor||(this.cache=this.editor.getContent(),null!==(n=a())&&void 0!==n&&n.remove(this.editor))},activated:function(){!this.inlineEditor&&this.initialized&&o(this)()},render:function(n){return this.inlineEditor?(o=n,i=this.elementId,r=this.$props.tagName,o(r||"div",{attrs:{id:i}})):(t=n,e=this.elementId,t("textarea",{attrs:{id:e},style:{visibility:"hidden"}}));var t,e,o,i,r}}}();
